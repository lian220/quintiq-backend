# FRED 데이터 누락 분석 보고서

**분석일**: 2026-02-01
**분석 대상**: daily_stock_data 컬렉션의 fred_indicators 필드

---

## 📊 문제 상황

### MongoDB 데이터 확인 결과

```json
{
  "date": "2026-01-30",
  "fred_indicators": {},  // ❌ 비어있음
  "yfinance_indicators": {
    "SP500": 6939.02978515625,
    "Dow_Jones": 48892.46875,
    "NASDAQ": 23461.8203125,
    "KOSPI": 5224.35986328125,
    "Gold": 4713.89990234375
  }
}
```

---

## 🔍 원인 분석

### FRED 데이터 발표 주기

FRED(Federal Reserve Economic Data) 지표는 **매일 발표되지 않습니다**.

| 지표 코드 | 지표명 | 발표 주기 | 비고 |
|----------|--------|----------|------|
| `GDP` | 국내총생산 | **분기별** | 약 1개월 후 발표 |
| `UNRATE` | 실업률 | **월별** | 매월 첫 번째 금요일 |
| `CPIAUCSL` | 소비자물가지수 | **월별** | 매월 중순 |
| `DGS10` | 10년물 국채금리 | **영업일** | 주말/공휴일 제외 |
| `DEXKOUS` | USD/KRW 환율 | **영업일** | 주말/공휴일 제외 |

### 2026-01-30(목요일) 데이터 상태

**수집된 FRED 데이터**: 0개

**이유**:
- `GDP`: 2026년 1분기 GDP는 아직 발표 전 (2025년 4분기 GDP가 최신)
- `UNRATE`: 1월 실업률은 2월 첫 번째 금요일에 발표 예정
- `CPIAUCSL`: 1월 CPI는 2월 중순에 발표 예정
- `DGS10`: 1/30(목)은 영업일이지만 **해당일 데이터가 FRED API에서 제공되지 않음** (발표 시차)
- `DEXKOUS`: 1/30(목)은 영업일이지만 **해당일 데이터가 FRED API에서 제공되지 않음**

---

## 📈 다른 날짜 비교

### 2026-01-23 (FRED: 2개)

```json
{
  "date": "2026-01-23",
  "fred_indicators": {
    "Treasury_10Y": 4.24,
    "USD_KRW": 1462.89
  }
}
```

### 2026-01-29 (FRED: 1개)

```json
{
  "date": "2026-01-29",
  "fred_indicators": {
    "Treasury_10Y": 4.24
  }
}
```

### 로그 분석

```
2026-02-01 10:00:31 INFO - ✅ daily_stock_data 저장: 2026-01-23 (FRED: 2, Yahoo: 5)
2026-02-01 10:00:31 INFO - ✅ daily_stock_data 저장: 2026-01-29 (FRED: 1, Yahoo: 5)
2026-02-01 10:00:31 INFO - ✅ daily_stock_data 저장: 2026-01-30 (FRED: 0, Yahoo: 5)
```

---

## ✅ 정상 동작 확인

### FRED API 수집은 정상적으로 작동함

```
2026-02-01 10:00:26 INFO - ✅ FRED 데이터 수집 완료: GDP (GDP)
2026-02-01 10:00:26 INFO - ✅ FRED 데이터 수집 완료: UNRATE (Unemployment_Rate)
2026-02-01 10:00:27 INFO - ✅ FRED 데이터 수집 완료: CPIAUCSL (CPI)
2026-02-01 10:00:27 INFO - ✅ FRED 데이터 수집 완료: DGS10 (Treasury_10Y)
2026-02-01 10:00:28 INFO - ✅ FRED 데이터 수집 완료: DEXKOUS (USD_KRW)
```

5개 지표 모두 **API 호출 성공**, **최근 365일 데이터 수집 완료**

하지만 **특정 날짜에는 발표된 데이터가 없기 때문에** `fred_indicators`가 비어있을 수 있습니다.

---

## 🎯 결론

### fred_indicators가 비어있는 것은 정상입니다

1. **FRED 데이터 특성**:
   - 경제 지표는 매일 발표되지 않음
   - GDP/실업률/CPI는 월/분기별 발표
   - 금리/환율도 영업일에만 발표되며 시차가 있음

2. **시스템은 정상 작동 중**:
   - FRED API 호출 성공
   - 최근 365일 데이터 수집 완료
   - 발표된 날짜에는 정상적으로 저장됨

3. **Yahoo Finance는 항상 데이터 있음**:
   - 주식/지수는 매 거래일 데이터 제공
   - 주말/공휴일 제외하고 항상 5개 지표 수집됨

---

## 📋 권장사항

### 1. 데이터 활용 시 주의사항

**fred_indicators가 빈 경우 처리**:
```python
# ✅ 올바른 처리
fred_data = daily_data.get("fred_indicators", {})
if fred_data:
    gdp = fred_data.get("GDP")
    if gdp is not None:
        # GDP 데이터 사용
        pass
else:
    # FRED 데이터가 없는 날 - 이전 날짜 데이터 사용 또는 Skip
    pass
```

**❌ 잘못된 처리**:
```python
# FRED 데이터가 항상 있다고 가정
gdp = daily_data["fred_indicators"]["GDP"]  # KeyError 발생 가능
```

### 2. Forward Fill 전략 고려

월별/분기별 지표는 **Forward Fill** 전략 사용 권장:

```python
# GDP는 분기별이므로 최신 값을 다음 분기까지 유지
last_gdp = None
for date, data in sorted_daily_data:
    if "GDP" in data["fred_indicators"]:
        last_gdp = data["fred_indicators"]["GDP"]
    elif last_gdp is not None:
        # Forward fill: 이전 GDP 값 사용
        data["fred_indicators"]["GDP"] = last_gdp
```

### 3. 문서 업데이트

스케줄러 문서에 FRED 데이터 특성 명시:
- 매일 업데이트되지 않을 수 있음
- 발표 주기에 따라 빈 필드 가능
- Forward Fill 전략 사용 권장

---

## 📊 FRED 데이터 발표 일정 (2026년 1-2월)

| 지표 | 1월 발표일 | 2월 발표일 | 내용 |
|------|----------|----------|------|
| **실업률** | 2026-02-07 (금) | 2026-03-07 (금) | 1월 실업률 |
| **CPI** | 2026-02-13 (수) | 2026-03-12 (수) | 1월 물가지수 |
| **GDP** | 2026-01-29 (목) | 2026-02-27 (목) | 2025년 Q4 GDP |
| **국채금리** | 매 영업일 | 매 영업일 | 당일 금리 |
| **환율** | 매 영업일 | 매 영업일 | 당일 환율 |

**참고**: 국채금리와 환율도 발표 시차로 인해 당일 데이터가 없을 수 있음

---

**작성**: Claude (QuantIQ Development Assistant)
**날짜**: 2026-02-01
**버전**: 1.0
